<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
          The Room Trivia Game
        </title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Linking CSS Reset File -->
        <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <!-- Linking CSS -->
        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
        <!-- Added link to the jQuery Library -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

      </head>


<body>

    <h1>The Room</h1>
    <div class="DisplayStart"></div>
    <div class="DisplayQuestion"></div>
    <div class="DisplayTimer"></div>
        <div class="AnswerButton"></div>


<script type="text/javascript">
// Answers
var RoomQuestions = {
    Question1: {
        Question: 'Who is Lisa having an affair with?',
        Answer: {
            Answer1: {
                Answer: "Mark",
                Correct: 1
            },
            Answer2: {
                Answer: "Johnny",
                Correct: 0
            },
            Answer3: {
                Answer: "Denny",
                Correct: 0
            },
            Answer4: {
                Answer: "Peter",
                Correct: 0
            }
        }
    },
    Question2: {
        Question: 'Why does Chris R come looking for money from Denny?',
        Answer: {
            Answer1: {
                Answer: "Denny used the money to buy drugs",
                Correct: 1
            },
            Answer2: {
                Answer: "What kind of money?",
                Correct: 0
            },
            Answer3: {
                Answer: "He thought Denny stole his money",
                Correct: 0
            },
            Answer4: {
                Answer: "He borrowed some to pay off a student loan",
                Correct: 0
            }
        }
    },
    Question3: {
        Question: 'Who plays Tommy Wiseau in the 2017 biography/comedy of The Room, The Disaster Artist?',
        Answer: {
            Answer1: {
                Answer: "James Franco",
                Correct: 1
            },
            Answer2: {
                Answer: "Johnny Depp",
                Correct: 0
            },
            Answer3: {
                Answer: "Hugh Jackman",
                Correct: 0
            },
            Answer4: {
                Answer: "Greg Sestero",
                Correct: 0
            }
        }
    }
}

// Count Totals
var Correct = 0;
var Incorrect = 0;
var Unanswered = 0;
var QuestionsArrayGameDefault = [RoomQuestions.Question1,RoomQuestions.Question2,RoomQuestions.Question3]
var QuestionsArrayGame = QuestionsArrayGameDefault;
var QuestionsArrayLength = QuestionsArrayGame.length;
var SetTimer = 5;
var QuestionTimer
var DisplayTimer

//Display Start Button
var startButton = $("<button>");
    startButton.text("Start Game");
    startButton.addClass("StartClass");
    $(".DisplayStart").append(startButton);



//DisplayTimer
function DTimer() {
    SetTimer = 5;
    var timer = $(".DisplayTimer")

    function timeIt () {
        SetTimer--;
    timer.text(SetTimer)
    }

    DisplayTimer = setInterval(timeIt,1000);
    }

function QTimer() {
    QuestionTimer = setInterval(function()
    { alert("TOO LATE!"); 
    }, 5000); // set this to 30 seconds
    }

function resetTimer() {
    DTimer();
    QTimer();
}

function clearTimers() {
    clearTimeout(QuestionTimer);
    clearTimeout(DisplayTimer);
    }

//RandomizeQuestions
function resetGame() {

// Set Totals to 0
    Correct = 0;
    Incorrect = 0;
    Unanswered = 0;

// Randomize Questions
    QuestionsArrayGame = QuestionsArrayGameDefault;
    QuestionsArrayLength = QuestionsArrayGame.length;

    for (var i = 1; i < QuestionsArrayGame.length; i++) {
        var index = Math.floor(Math.random() * QuestionsArrayLength);
        QuestionsArrayLength --;

        var temp = QuestionsArrayGame[QuestionsArrayLength];
        QuestionsArrayGame[QuestionsArrayLength] = QuestionsArrayGame[index];
        QuestionsArrayGame[index] = temp;
    }
    }

resetGame();

// Clear Questions
function removeAnswers() {
    $(".EachAnswer").remove();
    }

// Function to display Questions 


// Randomize Answers
function randomizeAnswers() {
    var AnswersArrayGameDefault = [QuestionsArrayGame[0].Answer.Answer1,QuestionsArrayGame[0].Answer.Answer2,QuestionsArrayGame[0].Answer.Answer3,QuestionsArrayGame[0].Answer.Answer4];
    var AnswersArrayGame = AnswersArrayGameDefault;
    AnswersArrayLength = AnswersArrayGame.length;

    AnswersArrayLength = AnswersArrayGame.length;

    for (var i = 1; i < AnswersArrayGame.length; i++) {
        var index = Math.floor(Math.random() * AnswersArrayLength);
        AnswersArrayLength --;

        var temp = AnswersArrayGame[AnswersArrayLength];
        AnswersArrayGame[AnswersArrayLength] = AnswersArrayGame[index];
        AnswersArrayGame[index] = temp;
    }
}
    
    // Display Question
    $( ".DisplayQuestion" ).append( "<p>" + QuestionsArrayGame[0]["Question"] + "</p>" );


    // Display Answers
    for (var j = 0; j < 4; j++) {
        var DisplayQuestions = [AnswersArrayGame[0].Answer,AnswersArrayGame[1].Answer,AnswersArrayGame[2].Answer,AnswersArrayGame[3].Answer];
        var StoreCorrectAnswer = [AnswersArrayGame[0].Correct,AnswersArrayGame[1].Correct,AnswersArrayGame[2].Correct,AnswersArrayGame[3].Correct];
        var DisplayButton = $("<button>");
            DisplayButton.attr("type", "button");
            DisplayButton.text(DisplayQuestions[j]);
            DisplayButton.attr("Valid",StoreCorrectAnswer[j]);
            DisplayButton.addClass("EachAnswer")
            $(".AnswerButton").append(DisplayButton);
    }

    QuestionsArrayGame.shift();

    


$(".DisplayStart").click(function() {
$(".DisplayStart").remove();
setQuestion();
resetTimer();
});


$(".EachAnswer").click(function() {
    var valid = ($(this).attr("valid"));
    
   if (valid == 1) {
       alert("Good");
       clearTimers();
       removeAnswers();
       setQuestion();
   }
   else {
       alert("Bad");
       clearTimers();
       removeAnswers();
       setQuestion();
   }

    });











</script>

</body>
</html>
